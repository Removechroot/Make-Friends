(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/common/more-share"],{"1eb8":function(e,n,t){"use strict";t.d(n,"b",(function(){return r})),t.d(n,"c",(function(){return i})),t.d(n,"a",(function(){return o}));var o={uniPopup:function(){return t.e("components/uni-popup/uni-popup").then(t.bind(null,"485f"))}},r=function(){var e=this,n=e.$createElement,t=(e._self._c,e.__map(e.providerList,(function(n,t){var o=e.__get_orig(n),r=e.isDisableButton(n);return{$orig:o,m0:r}})));e.$mp.data=Object.assign({},{$root:{l0:t}})},i=[]},"336f":function(e,n,t){"use strict";t.r(n);var o=t("1eb8"),r=t("6310");for(var i in r)"default"!==i&&function(e){t.d(n,e,(function(){return r[e]}))}(i);var a,s=t("f0c5"),c=Object(s["a"])(r["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],a);n["default"]=c.exports},6310:function(e,n,t){"use strict";t.r(n);var o=t("e8c8"),r=t.n(o);for(var i in o)"default"!==i&&function(e){t.d(n,e,(function(){return o[e]}))}(i);n["default"]=r.a},e8c8:function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(t("a34a"));function r(e){return e&&e.__esModule?e:{default:e}}function i(e,n,t,o,r,i,a){try{var s=e[i](a),c=s.value}catch(u){return void t(u)}s.done?n(c):Promise.resolve(c).then(o,r)}function a(e){return function(){var n=this,t=arguments;return new Promise((function(o,r){var a=e.apply(n,t);function s(e){i(a,o,r,s,c,"next",e)}function c(e){i(a,o,r,s,c,"throw",e)}s(void 0)}))}}var s=function(){t.e("components/uni-popup/uni-popup").then(function(){return resolve(t("485f"))}.bind(null,t)).catch(t.oe)},c={components:{uniPopup:s},data:function(){return{shareType:1,providerList:[],shareText:"uni-app可以同时发布成原生App、小程序、H5，邀请你一起体验！"}},computed:{isDisableButton:function(){return function(e){return 0===this.shareType&&"qq"===e.id||5===this.shareType&&"分享到微信好友"!==e.name}}},mounted:function(){var n=this;e.getProvider({service:"share",success:function(e){for(var t=[],o=0;o<e.provider.length;o++)switch(e.provider[o]){case"weixin":t.push({name:"微信好友",icon:"icon-weixin",color:"bg-success",id:"weixin",sort:0}),t.push({name:"朋友圈",icon:"icon-huiyuanvip",color:"bg-dark",id:"weixin",type:"WXSenceTimeline",sort:1});break;case"sinaweibo":t.push({name:"微博",icon:"icon-weibo",color:"bg-danger",id:"sinaweibo",sort:2});break;case"qq":t.push({name:"分享到QQ",icon:"icon-qq",color:"bg-primary",id:"qq",sort:3});break;default:break}n.providerList=t.sort((function(e,n){return e.sort-n.sort}))},fail:function(n){console.log("获取分享通道失败",n),e.showModal({content:"获取分享通道失败",showCancel:!1})}})},methods:{open:function(){this.$refs.popup.open()},close:function(){this.$refs.popup.close()},share:function(n){var t=this;return a(o.default.mark((function r(){var i;return o.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(console.log("分享通道:"+n.id+"； 分享类型:"+t.shareType),t.shareText||1!==t.shareType&&0!==t.shareType){o.next=4;break}return e.showModal({content:"分享内容不能为空",showCancel:!1}),o.abrupt("return");case 4:if(t.image||2!==t.shareType&&0!==t.shareType){o.next=7;break}return e.showModal({content:"分享图片不能为空",showCancel:!1}),o.abrupt("return");case 7:i={provider:n.id,scene:n.type&&"WXSenceTimeline"===n.type?"WXSenceTimeline":"WXSceneSession",type:t.shareType,success:function(n){console.log("success",n),e.showModal({content:"已分享",showCancel:!1})},fail:function(n){console.log("fail",n),e.showModal({content:n.errMsg,showCancel:!1})},complete:function(){console.log("分享操作结束!")}},o.t0=t.shareType,o.next=0===o.t0?11:1===o.t0?16:2===o.t0?18:5===o.t0?20:24;break;case 11:return i.summary=t.shareText,i.imageUrl=t.image,i.title="欢迎体验uniapp",i.href="https://uniapp.dcloud.io",o.abrupt("break",25);case 16:return i.summary=t.shareText,o.abrupt("break",25);case 18:return i.imageUrl=t.image,o.abrupt("break",25);case 20:return i.imageUrl=t.image?t.image:"https://img-cdn-qiniu.dcloud.net.cn/uniapp/app/share-logo@3.png",i.title="欢迎体验uniapp",i.miniProgram={id:"gh_33446d7f7a26",path:"/pages/tabBar/component/component",webUrl:"https://uniapp.dcloud.io",type:0},o.abrupt("break",25);case 24:return o.abrupt("break",25);case 25:if(0!==i.type||"iOS"!==plus.os.name){o.next=29;break}return o.next=28,t.compress();case 28:i.imageUrl=o.sent;case 29:1===i.type&&"qq"===i.provider&&(i.href="https://uniapp.dcloud.io",i.title="欢迎体验uniapp"),e.share(i);case 31:case"end":return o.stop()}}),r)})))()},compress:function(){console.log("开始压缩");var n=this.image;return new Promise((function(t){var o=plus.io.convertAbsoluteFileSystem(n.replace("file://",""));console.log("after"+o),plus.io.resolveLocalFileSystemURL(o,(function(o){o.file((function(o){console.log("getFile:"+JSON.stringify(o)),o.size>20480&&plus.zip.compressImage({src:n,dst:n.replace(".jpg","2222.jpg").replace(".JPG","2222.JPG"),width:"10%",height:"10%",quality:1,overwrite:!0},(function(e){console.log("success zip****"+e.size);var o=n.replace(".jpg","2222.jpg").replace(".JPG","2222.JPG");t(o)}),(function(n){e.showModal({content:"分享图片太大,需要请重新选择图片!",showCancel:!1})}))}))}),(function(n){console.log("Resolve file URL failed: "+n.message),e.showModal({content:"分享图片太大,需要请重新选择图片!",showCancel:!1})}))}))}}};n.default=c}).call(this,t("543d")["default"])}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/common/more-share-create-component',
    {
        'components/common/more-share-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("336f"))
        })
    },
    [['components/common/more-share-create-component']]
]);
