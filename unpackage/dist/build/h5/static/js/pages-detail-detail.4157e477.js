(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-detail-detail"],{"07ff":function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.IsShow?n("v-uni-view",[n("common-list",{attrs:{item:t.info,isdetail:!0},on:{doComment:function(e){arguments[0]=e=t.$handleEvent(e),t.doComment.apply(void 0,arguments)},Follow:function(e){arguments[0]=e=t.$handleEvent(e),t.Follow.apply(void 0,arguments)},doShare:function(e){arguments[0]=e=t.$handleEvent(e),t.doShare.apply(void 0,arguments)},type:function(e){arguments[0]=e=t.$handleEvent(e),t.type.apply(void 0,arguments)}}},[n("v-uni-view",{},[n("v-uni-view",[t.info.titlepic.length>0?t._l(t.info.titlepic,(function(e,i){return n("v-uni-image",{key:i,staticClass:"w-100",attrs:{src:e.imgUrl,mode:"",mode:"aspectFit"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.preview(i)}}})})):t._e()],2)],1)],1),n("divider"),n("v-uni-view",{staticClass:"p-2 font-md font-weight-bold"},[t._v("最新评论：")]),n("v-uni-view",{staticClass:"px-2"},[t.review.length>0?t._l(t.review,(function(e,i){return n("v-uni-view",{key:i,staticClass:"uni-comment-list"},[n("v-uni-view",{staticClass:"uni-comment-face"},[n("v-uni-image",{attrs:{src:e.avatar,mode:"widthFix"}})],1),n("v-uni-view",{staticClass:"uni-comment-body"},[n("v-uni-text",[t._v(t._s(e.username))]),n("v-uni-view",{staticClass:"uni-comment-content"},[t._v(t._s(e.msg))]),n("v-uni-view",{staticClass:"uni-comment-date"},[n("v-uni-view",[t._v(t._s(t._f("formatTime")(e.create_time)))])],1)],1)],1)})):[n("nothing",[n("v-uni-view",[t._v("抢沙发你是第一个！加油")])],1)]],2),n("more-share",{ref:"share"}),n("v-uni-view",{staticStyle:{height:"100rpx"}}),n("bottonBtn",{on:{submit:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}})],1):t._e()},o=[]},"0afa":function(t,e,n){"use strict";n.r(e);var i=n("6ab5"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},3614:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={Nice:function(t,e,n){var i="support"===t.type?"顶成功":"踩成功";if(""===e.support.type)return e.support.type=t.type,void e.support[t.type+"_count"]++;"support"===e.support.type&&"unsupport"===t.type&&(e.support.support_count--,e.support.unsupport_count++),"unsupport"===e.support.type&&"support"===t.type&&(e.support.support_count++,e.support.unsupport_count--),e.support.type=t.type;var a=e.support;this.typeManage(t.id,a,i)},typeManage:function(e,n,i){t.callFunction({name:"update",data:{type:"typeManage",id:e,support:n}}).then((function(t){0===t.result.status&&uni.showToast({title:i})}))}};e.default=n}).call(this,n("a9ff")["default"])},"3a28":function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"fixed-bottom flex align-center border-top bg-white",staticStyle:{height:"100rpx"}},[n("v-uni-input",{staticClass:"flex-1 rounded bg-light ml-2",staticStyle:{padding:"5rpx"},attrs:{type:"text",value:"",placeholder:"文明发炎从我做起"},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),n("v-uni-view",{staticClass:"iconfont icon-fabu flex align-center justify-center font-lg animate__animated",staticStyle:{width:"100rpx"},attrs:{"hover-class":"animate__jello text-main"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}})],1)},o=[]},"43ca":function(t,e,n){"use strict";(function(t){var i=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("94ee")),o=i(n("611d")),s=i(n("5013")),r=i(n("3614")),u=i(n("7782")),c={filters:{formatTime:function(t){return u.default.gettime(t)}},components:{commonList:a.default,bottonBtn:o.default,moreShare:s.default},onNavigationBarButtonTap:function(){this.$refs.share.open()},onBackPress:function(){this.info=[],this.IsShow=!1,this.review=[]},data:function(){return{info:{},IsShow:!1,review:[]}},onShareAppMessage:function(){return{title:"自定义分享标题",path:"/pages/detail/detail?detail="+this.info._id}},onLoad:function(e){var n=this;e.detail&&t.callFunction({name:"Getdetail",data:{cid:e.detail}}).then((function(t){if(t.success){var e=t.result.data;n.info=e[0],n.review=e[0].review,n.IsShow=!0,uni.setNavigationBarTitle({title:n.info.title})}}))},methods:{doComment:function(){},doShare:function(){},Follow:function(e){var n=this,i=e.id,a=e.type;e.index;t.callFunction({name:"update",data:{type:"isFollow",id:i,isFollow:a}}).then((function(t){if(0===t.result.status){n.info.isFollow=a;var e=!0===a?"关注成功":"取消关注";uni.showToast({title:e})}}))},type:function(t){r.default.Nice(t,this.info)},preview:function(t){uni.previewImage({urls:this.imageslist,count:t})},submit:function(e){if(""!==e){uni.showToast({title:"提交中测试用户...",icon:"loading"});var n={user_id:1,avatar:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-mf-ser1/98883de0-093e-11eb-8a36-ebb87efcf8c0.jpg",username:"测试用户",msg:e,type:"text",create_time:(new Date).getTime()};this.review.push(n),t.callFunction({name:"update",data:{type:"review",id:this.info._id,review:this.review,comment_count:this.review.length}}).then((function(){uni.showToast({title:"发布成功"})}))}}}};e.default=c}).call(this,n("a9ff")["default"])},"4a87":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{content:""}},methods:{submit:function(){if(""===this.content)return uni.showToast({title:"消息不能为空"});this.$emit("submit",this.content),this.content=""}}};e.default=i},5013:function(t,e,n){"use strict";n.r(e);var i=n("7dfc"),a=n("0afa");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);var s,r=n("f0c5"),u=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,"06692cff",null,!1,i["a"],s);e["default"]=u.exports},"611d":function(t,e,n){"use strict";n.r(e);var i=n("3a28"),a=n("670b");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);var s,r=n("f0c5"),u=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,"2737840f",null,!1,i["a"],s);e["default"]=u.exports},"670b":function(t,e,n){"use strict";n.r(e);var i=n("4a87"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},"6ab5":function(t,e,n){"use strict";var i=n("4ea4");n("4e82"),n("d3b7"),n("ac1f"),n("5319"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var a=i(n("1da1")),o=i(n("85eb")),s={components:{uniPopup:o.default},data:function(){return{shareType:1,providerList:[],shareText:"uni-app可以同时发布成原生App、小程序、H5，邀请你一起体验！"}},computed:{isDisableButton:function(){return function(t){return 0===this.shareType&&"qq"===t.id||5===this.shareType&&"分享到微信好友"!==t.name}}},mounted:function(){var t=this;uni.getProvider({service:"share",success:function(e){for(var n=[],i=0;i<e.provider.length;i++)switch(e.provider[i]){case"weixin":n.push({name:"微信好友",icon:"icon-weixin",color:"bg-success",id:"weixin",sort:0}),n.push({name:"朋友圈",icon:"icon-huiyuanvip",color:"bg-dark",id:"weixin",type:"WXSenceTimeline",sort:1});break;case"sinaweibo":n.push({name:"微博",icon:"icon-weibo",color:"bg-danger",id:"sinaweibo",sort:2});break;case"qq":n.push({name:"分享到QQ",icon:"icon-qq",color:"bg-primary",id:"qq",sort:3});break;default:break}t.providerList=n.sort((function(t,e){return t.sort-e.sort}))},fail:function(t){console.log("获取分享通道失败",t),uni.showModal({content:"获取分享通道失败",showCancel:!1})}})},methods:{open:function(){this.$refs.popup.open()},close:function(){this.$refs.popup.close()},share:function(t){var e=this;return(0,a.default)(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(console.log("分享通道:"+t.id+"； 分享类型:"+e.shareType),e.shareText||1!==e.shareType&&0!==e.shareType){n.next=4;break}return uni.showModal({content:"分享内容不能为空",showCancel:!1}),n.abrupt("return");case 4:if(e.image||2!==e.shareType&&0!==e.shareType){n.next=7;break}return uni.showModal({content:"分享图片不能为空",showCancel:!1}),n.abrupt("return");case 7:i={provider:t.id,scene:t.type&&"WXSenceTimeline"===t.type?"WXSenceTimeline":"WXSceneSession",type:e.shareType,success:function(t){console.log("success",t),uni.showModal({content:"已分享",showCancel:!1})},fail:function(t){console.log("fail",t),uni.showModal({content:t.errMsg,showCancel:!1})},complete:function(){console.log("分享操作结束!")}},n.t0=e.shareType,n.next=0===n.t0?11:1===n.t0?16:2===n.t0?18:5===n.t0?20:24;break;case 11:return i.summary=e.shareText,i.imageUrl=e.image,i.title="欢迎体验uniapp",i.href="https://uniapp.dcloud.io",n.abrupt("break",25);case 16:return i.summary=e.shareText,n.abrupt("break",25);case 18:return i.imageUrl=e.image,n.abrupt("break",25);case 20:return i.imageUrl=e.image?e.image:"https://img-cdn-qiniu.dcloud.net.cn/uniapp/app/share-logo@3.png",i.title="欢迎体验uniapp",i.miniProgram={id:"gh_33446d7f7a26",path:"/pages/tabBar/component/component",webUrl:"https://uniapp.dcloud.io",type:0},n.abrupt("break",25);case 24:return n.abrupt("break",25);case 25:if(0!==i.type||"iOS"!==plus.os.name){n.next=29;break}return n.next=28,e.compress();case 28:i.imageUrl=n.sent;case 29:1===i.type&&"qq"===i.provider&&(i.href="https://uniapp.dcloud.io",i.title="欢迎体验uniapp"),uni.share(i);case 31:case"end":return n.stop()}}),n)})))()},compress:function(){console.log("开始压缩");var t=this.image;return new Promise((function(e){var n=plus.io.convertAbsoluteFileSystem(t.replace("file://",""));console.log("after"+n),plus.io.resolveLocalFileSystemURL(n,(function(n){n.file((function(n){console.log("getFile:"+JSON.stringify(n)),n.size>20480&&plus.zip.compressImage({src:t,dst:t.replace(".jpg","2222.jpg").replace(".JPG","2222.JPG"),width:"10%",height:"10%",quality:1,overwrite:!0},(function(n){console.log("success zip****"+n.size);var i=t.replace(".jpg","2222.jpg").replace(".JPG","2222.JPG");e(i)}),(function(t){uni.showModal({content:"分享图片太大,需要请重新选择图片!",showCancel:!1})}))}))}),(function(t){console.log("Resolve file URL failed: "+t.message),uni.showModal({content:"分享图片太大,需要请重新选择图片!",showCancel:!1})}))}))}}};e.default=s},"6c29":function(t,e,n){"use strict";n.r(e);var i=n("43ca"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},"7a96":function(t,e,n){"use strict";var i=n("c4c9"),a=n.n(i);a.a},"7dfc":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var i={uniPopup:n("85eb").default},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("uni-popup",{ref:"popup",attrs:{type:"bottom"}},[n("v-uni-view",{staticClass:"bg-white"},[n("v-uni-view",{staticClass:"text-center py-2 font-md border-bottom border-light-secondary"},[t._v("分享到")]),n("v-uni-view",{staticClass:"flex align-center"},t._l(t.providerList,(function(e,i){return n("v-uni-view",{key:i,staticClass:"flex-1 flex flex-column align-center justify-center py-2",attrs:{"hover-class":"bg-light",disabled:t.isDisableButton(e)},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.share(e)}}},[n("v-uni-view",{staticClass:"iconfont flex justify-center align-center font-lg  text-white rounded-circle ",class:e.icon+" "+e.color,staticStyle:{width:"100rpx",height:"100rpx"}}),n("v-uni-text",{staticClass:"font-sm mt-1 text-muted"},[t._v(t._s(e.name))])],1)})),1),n("v-uni-view",{staticClass:"text-center py-2 font-md border-top border-light-secondary",attrs:{"hover-class":"bg-light"}},[t._v("取消")])],1)],1)},o=[]},"845a":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,".img uni-image[data-v-7a4ad6df]{width:%?85?%;height:%?85?%;border-radius:100%}.username[data-v-7a4ad6df]{padding-right:160}.focus[data-v-7a4ad6df]{width:%?90?%;height:%?50?%;background-color:#ff4a6ax;color:#fff;border-radius:5px}.nofocus[data-v-7a4ad6df]{width:%?90?%;height:%?50?%;background-color:silver;color:#fff;border-radius:5px}.centencon[data-v-7a4ad6df]{font-size:%?30?%;margin:%?10?% 0}.bottonfz[data-v-7a4ad6df]{font-size:%?35?%}.bottonfz uni-text[data-v-7a4ad6df]{padding-left:%?10?%}.ac-select[data-v-7a4ad6df]{color:#ff4a6a}",""]),t.exports=e},"94ee":function(t,e,n){"use strict";n.r(e);var i=n("f514"),a=n("ae7c");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("7a96");var s,r=n("f0c5"),u=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,"7a4ad6df",null,!1,i["a"],s);e["default"]=u.exports},ae7c:function(t,e,n){"use strict";n.r(e);var i=n("d2be"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},c4c9:function(t,e,n){var i=n("845a");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("2fffb1a4",i,!0,{sourceMap:!1,shadowMode:!1})},d2be:function(t,e,n){"use strict";var i=n("4ea4");n("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("7782")),o={data:function(){return{}},props:{item:Object,index:{type:Number,default:0},isdetail:!1,_id:""},filters:{formatTime:function(t){return a.default.gettime(t)}},methods:{openspace:function(){console.log(1)},follow:function(t){this.$emit("Follow",{id:this.item._id,type:t,index:this.index})},openDtail:function(){this.isdetail||uni.navigateTo({url:"../../pages/detail/detail?detail=".concat(this.item._id)})},dosupport:function(t){this.$emit("type",{id:this.item._id,type:t,index:this.index})},doComment:function(){if(!this.isdetail)return this.openDtail();this.$emit("doComment")},doShare:function(){if(!this.isdetail)return this.openDtail();this.$emit("doShare")}}};e.default=o},f4e9:function(t,e,n){"use strict";n.r(e);var i=n("07ff"),a=n("6c29");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);var s,r=n("f0c5"),u=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,"57977df6",null,!1,i["a"],s);e["default"]=u.exports},f514:function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"p-2 animate__animated animate__fast animate__fadeIn"},[n("v-uni-view",{staticClass:"flex align-center justify-between"},[n("v-uni-view",{staticClass:"flex justify-center align-center img"},[n("v-uni-image",{attrs:{src:t.item.userpic,"lazy-load":!0},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openspace.apply(void 0,arguments)}}}),n("v-uni-view",{staticClass:"username ml-2"},[n("v-uni-view",{staticClass:"font",staticStyle:{"line-height":"1.5"}},[t._v(t._s(t.item.username))]),n("v-uni-view",{staticClass:"font-sm",staticStyle:{color:"#9d9589","line-height":"1.5"}},[t._v(t._s(t._f("formatTime")(t.item.newstime)))])],1)],1),t.item.isFollow?n("v-uni-view",{staticClass:"nofocus font-sm flex justify-center align-center",attrs:{"hover-class":"animate__animated animate__jello animate__fast"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.follow(!1)}}},[t._v("已关注")]):n("v-uni-view",{staticClass:"focus bg-danger flex justify-center align-center",attrs:{"hover-class":"animate__animated animate__jello animate__fast"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.follow(!0)}}},[t._v("关注")])],1),n("v-uni-view",{staticStyle:{"min-height":"80rpx"}},[n("v-uni-view",{staticClass:"centencon",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openDtail.apply(void 0,arguments)}}},[t._v(t._s(t.item.title))]),t._t("default",[t.item.titlepic[0]?[n("v-uni-image",{staticClass:"w-100",staticStyle:{height:"355rpx","border-radius":"5px"},attrs:{src:t.item.titlepic[0].imgUrl},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openDtail.apply(void 0,arguments)}}})]:t._e()])],2),n("v-uni-view",{staticClass:"flex bottom"},[n("v-uni-view",{staticClass:"flex align-center justify-center flex-1 animate__animated animate__faster",class:"support"===t.item.support.type?"ac-select":"",attrs:{"hover-class":"animate__jello text-main"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.dosupport("support")}}},[n("v-uni-text",{staticClass:"iconfont icon-dianzan2 mr-2",style:"support"===t.item.support.type?"color:#ff4a6a;":""}),n("v-uni-text",[t._v(t._s(t.item.support.support_count))])],1),n("v-uni-view",{staticClass:"flex align-center justify-center flex-1 animate__animated animate__faster",class:"unsupport"===t.item.support.type?"ac-select":"",attrs:{"hover-class":"animate__jello text-main"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.dosupport("unsupport")}}},[n("v-uni-text",{staticClass:"iconfont icon-cai mr-2",style:"unsupport"===t.item.support.type?"color:#ff4a6a;":""}),n("v-uni-text",[t._v(t._s(t.item.support.unsupport_count))])],1),n("v-uni-view",{staticClass:"flex align-center justify-center flex-1 animate__animated animate__faster",attrs:{"hover-class":"animate__animated animate__jello animate__fast"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.doComment.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"iconfont icon-pinglun mr-2"}),n("v-uni-text",[t._v(t._s(t.item.comment_count))])],1),n("v-uni-view",{staticClass:"flex align-center justify-center flex-1 animate__animated animate__faster",attrs:{"hover-class":"animate__animated animate__jello animate__fast"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.doShare.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"iconfont icon-fenxiang_2 mr-2"}),n("v-uni-text",[t._v(t._s(t.item.share_name))])],1)],1)],1)},o=[]}}]);