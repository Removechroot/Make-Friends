{"version":3,"sources":["uni-app:///main.js","webpack:///F:/Project/MakeFriends/pages/my/my.vue?50e2","webpack:///F:/Project/MakeFriends/pages/my/my.vue?d0e0","webpack:///F:/Project/MakeFriends/pages/my/my.vue?a769","webpack:///F:/Project/MakeFriends/pages/my/my.vue?91fd","uni-app:///pages/my/my.vue"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,mF;AACAA,UAAU,CAACC,WAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAA+G;AAC/G;AACsD;AACL;;;AAGjD;AACoM;AACpM,gBAAgB,6MAAU;AAC1B,EAAE,wEAAM;AACR,EAAE,6EAAM;AACR,EAAE,sFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,iFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAuvB,CAAgB,4wBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACsD3wB,sB;;AAEA;AACA;AACA,sBADA,EADA;;AAIA,MAJA,kBAIA;AACA;AACA,8GADA;AAEA,oBAFA;AAGA;AACA,uDADA;AAEA,wBAFA,EAHA;;;AAQA,GAbA;AAcA,0BAdA,sCAcA;AACA;AACA,iCADA;;AAGA,GAlBA;AAmBA,QAnBA,oBAmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBADA;AAEA;AACA,4BADA;AAEA;AACA,oBADA,EAFA,EAFA;;;AAQA;AACA,aATA,yBASA;AACA;AACA;AACA;AACA,uDADA;AAEA,qDAFA;AAGA,yBAHA;;AAKA;AACA,OAlBA;AAmBA;AACA,UApBA,kBAoBA;AACA;AACA;AACA,OAvBA;;AAyBA,GAlDA;AAmDA;AACA,iBADA,2BACA;AACA;AACA;AACA,oBADA;;AAGA;AACA,0BADA;AAEA;AACA;AACA,SAJA;;AAMA,KAZA;AAaA,eAbA,uBAaA,GAbA,EAaA;AACA;AACA;AACA;AACA;AACA,+BADA;;AAGA;AACA,oCADA;AAEA,sBAFA;AAGA,gCAHA,EAHA;;AAQA,mBARA,mBAQA,GARA,EAQA;AACA;AACA;AACA,gEADA;AAEA,8DAFA;AAGA,2CAHA;;AAKA;AACA,aAhBA;;;AAmBA;AACA,SAtBA;;AAwBA,KAvCA;AAwCA,aAxCA,qBAwCA,IAxCA,EAwCA;AACA;AACA,2BADA;AAEA;AACA,iCADA;AAEA;AACA,sBADA,EAFA,EAFA;;;AAQA;AACA;AACA;AACA;AACA;AACA,SAbA;AAcA,YAdA,kBAcA;AACA;AACA,2BADA;;AAGA,SAlBA;AAmBA,gBAnBA,sBAmBA;AACA;AACA,SArBA;;AAuBA,KAhEA,EAnDA,E","file":"pages/my/my.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/my/my.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./my.vue?vue&type=template&id=0be17cc6&\"\nvar renderjs\nimport script from \"./my.vue?vue&type=script&lang=js&\"\nexport * from \"./my.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!G:\\\\HBuilderX.2.8.8.20200820.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/my/my.vue\"\nexport default component.exports","export * from \"-!G:\\\\HBuilderX.2.8.8.20200820.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!G:\\\\HBuilderX.2.8.8.20200820.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!G:\\\\HBuilderX.2.8.8.20200820.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!G:\\\\HBuilderX.2.8.8.20200820.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!G:\\\\HBuilderX.2.8.8.20200820.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\HBuilderX.2.8.8.20200820.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./my.vue?vue&type=template&id=0be17cc6&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!G:\\\\HBuilderX.2.8.8.20200820.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!G:\\\\HBuilderX.2.8.8.20200820.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!G:\\\\HBuilderX.2.8.8.20200820.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!G:\\\\HBuilderX.2.8.8.20200820.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\HBuilderX.2.8.8.20200820.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./my.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!G:\\\\HBuilderX.2.8.8.20200820.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!G:\\\\HBuilderX.2.8.8.20200820.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!G:\\\\HBuilderX.2.8.8.20200820.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!G:\\\\HBuilderX.2.8.8.20200820.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\HBuilderX.2.8.8.20200820.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./my.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<!-- #ifdef APP-PLUS -->\r\n\t\t<view class=\"flex justify-center align-center flex-column\">\r\n\t\t\t<text class=\"mb-2\">登录平台，使用更多功能</text>\r\n\t\t\t<view class=\"bg-secondary flex justify-center align-center bg-success rounded-circle\" style=\"width: 100rpx;height: 100rpx;\">\r\n\t\t\t\t<text class=\"iconfont icon-weixin  font-weight-light\" style=\"font-size: 30px; color: #FFFFFF;\"></text>\r\n\t\t\t</view>\r\n\t\t\t<text class=\"mt-2 \">微信登录</text>\r\n\t\t</view>\r\n\t\t<!-- #endif -->\r\n\t\t<!-- #ifdef MP-WEIXIN -->\r\n\t\t<template v-if=\"!islogin\">\r\n\t\t\t<label for=\"WEIXIN\">\r\n\t\t\t\t<view class=\"flex align-center p-2\">\r\n\t\t\t\t\t<image :src=\"userInfo.avatarUrl\" class=\"rounded-circle\" style=\"width: 100rpx;height: 100rpx;\"></image>\r\n\t\t\t\t\t<view class=\"flex flex-column flex-1 px-2\">\r\n\t\t\t\t\t\t<text class=\"font-lg font-weight-bold text-dark\">{{ userInfo.nickName }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<text class=\"iconfont icon-jinru\"></text>\r\n\t\t\t\t</view>\r\n\t\t\t</label>\r\n\t\t\t<button open-type=\"getUserInfo\" @getuserinfo=\"loginByWeixin\" class=\"bg-white overflow-hidden\" style=\"\" id=\"WEIXIN\"></button>\r\n\t\t</template>\r\n\t\t<!-- #endif -->\r\n\r\n\t\t<view class=\"flex align-center p-2\" hover-class=\"bg-hover-light\" v-if=\"islogin\">\r\n\t\t\t<image :src=\"userInfo.avatarUrl\" class=\"rounded-circle\" style=\"width: 100rpx;height: 100rpx;\"></image>\r\n\t\t\t<view class=\"flex flex-column flex-1 px-2\">\r\n\t\t\t\t<text class=\"font-lg font-weight-bold text-dark\">{{ userInfo.nickName }}</text>\r\n\t\t\t\t<text class=\"font-sm text-muted\">总帖子：0 今日发帖:0</text>\r\n\t\t\t</view>\r\n\t\t\t<text class=\"iconfont icon-jinru\"></text>\r\n\t\t</view>\r\n\t\t<view class=\"flex justify-center align-center p-2\">\r\n\t\t\t<block v-for=\"(item, index) in myData\" :key=\"index\">\r\n\t\t\t\t<view class=\"flex-1 flex flex-column align-center\" hover-class=\"bg-light\">\r\n\t\t\t\t\t<text class=\"font-lg \">{{ item.num }}</text>\r\n\t\t\t\t\t<text class=\"font text-muted\">{{ item.name }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</block>\r\n\t\t</view>\r\n\t\t<!-- AD位置 -->\r\n\t\t<view class=\" flex justify-center align-center p-2 px-3\" @click=\"getUserInfo\">\r\n\t\t\t<image src=\"https://picsum.photos/750/170?random=1\" style=\"height: 170rpx;\" class=\"rounded\" mode=\"widthFix\"></image>\r\n\t\t</view>\r\n\r\n\t\t<list-item title=\"浏览历史\" icon=\"icon-liulan\"></list-item>\r\n\t\t<list-item title=\"社区认证\" icon=\"icon-huiyuanvip\"></list-item>\r\n\t\t<list-item title=\"审核帖子\" icon=\"icon-jianpan1\"></list-item>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nlet weixinAuthService;\r\nimport listItem from '@/components/uni-ui/list-item/list-item.vue';\r\nexport default {\r\n\tcomponents: {\r\n\t\tlistItem\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tmyData: [{ name: '帖子', num: 1 }, { name: '动态', num: 2 }, { name: '评论', num: 3 }, { name: '粉丝', num: 6 }],\r\n\t\t\tislogin: false,\r\n\t\t\tuserInfo: {\r\n\t\t\t\tavatarUrl: 'https://picsum.photos/100?random=1',\r\n\t\t\t\tnickName: '请登录！'\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\tonNavigationBarButtonTap() {\r\n\t\tuni.navigateTo({\r\n\t\t\turl: '../user-set/user-set'\r\n\t\t});\r\n\t},\r\n\tonLoad() {\r\n\t\t//获取uni_id_token\r\n\t\tlet res = uni.getStorageSync('uni_id_token');\r\n\t\t// ？？？ 这里uniCloud 更改了this指向，解决方法未知\r\n\t\tlet that = this;\r\n\t\t// 调用 checkToken 方法\r\n\t\tuniCloud.callFunction({\r\n\t\t\tname: 'user-center',\r\n\t\t\tdata: {\r\n\t\t\t\taction: 'checkToken',\r\n\t\t\t\tparams: {\r\n\t\t\t\t\ttoken: res\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 成功回调\r\n\t\t\tsuccess({ result }) {\r\n\t\t\t\tif (result.code > 0) return;\r\n\t\t\t\tthat.islogin = true;\r\n\t\t\t\tuni.setStorageSync('UserInfo',JSON.stringify({\r\n\t\t\t\t\tavatarUrl:result.userInfo.userInfo.avatarUrl,\r\n\t\t\t\t\tnickName:result.userInfo.userInfo.nickName,\r\n\t\t\t\t\tUid:result.uid \r\n\t\t\t\t}));\r\n\t\t\t\tthat.userInfo = result.userInfo.userInfo;\r\n\t\t\t},\r\n\t\t\t//失败回调\r\n\t\t\tfail() {\r\n\t\t\t\tthat.islogin = false;\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\tmethods: {\r\n\t\tloginByWeixin() {\r\n\t\t\tif (this.islogin) return;\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle: '请稍后'\r\n\t\t\t});\r\n\t\t\tuni.login({\r\n\t\t\t\tprovider: 'weixin',\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tthis.GetopenID(res.code);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetUserInfo(uid) {\r\n\t\t\tlet that = this;\r\n\t\t\tuni.getUserInfo({\r\n\t\t\t\tsuccess: ({ userInfo }) => {\r\n\t\t\t\t\tuniCloud.callFunction({\r\n\t\t\t\t\t\tname: 'user-center',\r\n\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\taction: 'pushuserinfo',\r\n\t\t\t\t\t\t\tuid,\r\n\t\t\t\t\t\t\tuserInfo\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\tif (!res.success) return;\r\n\t\t\t\t\t\t\tuni.setStorageSync('UserInfo',JSON.stringify({\r\n\t\t\t\t\t\t\t\tavatarUrl:res.result.data[0].userInfo.avatarUrl,\r\n\t\t\t\t\t\t\t\tnickName:res.result.data[0].userInfo.nickName,\r\n\t\t\t\t\t\t\t\tUid:res.result.data[0]._id\r\n\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t\tthat.userInfo = res.result.data[0].userInfo;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tthis.islogin = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tGetopenID(code) {\r\n\t\t\tuniCloud.callFunction({\r\n\t\t\t\tname: 'user-center',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\taction: 'loginByWeixin',\r\n\t\t\t\t\tparams: {\r\n\t\t\t\t\t\tcode\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.result.code === 0) {\r\n\t\t\t\t\t\tuni.setStorageSync('uni_id_token', res.result.token);\r\n\t\t\t\t\t\tthis.getUserInfo(res.result.uid);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail() {\r\n\t\t\t\t\tuni.uni.showToast({\r\n\t\t\t\t\t\ttitle: '用户取消登录'\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tcomplete() {\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style></style>\n"],"sourceRoot":""}